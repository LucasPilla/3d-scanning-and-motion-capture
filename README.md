# 3d-scanning-and-motion-capture

[![Open Proposal](https://img.shields.io/badge/Proposal-PDF-red?style=flat-square)](https://github.com/LucasPilla/3d-scanning-and-motion-capture/blob/main/docs/proposal.pdf)

## TODO

- [x] Configure repository, CMake and Docker
- [x] Implement 2D keypoint detection with OpenPose
- [ ] Implement SMPL parameters optimization with Ceres
- [ ] Evaluate baseline
- [ ] Implement proposed enhancements
- [ ] Evaluate proposed method
- [ ] Write the final report
- [ ] Prepare presentation

## Setup

First, clone this GitHub repository.

```
git clone https://github.com/LucasPilla/3d-scanning-and-motion-capture
```

Navigate to the folder containing the `Dockerfile` and build the image. This will create a Docker image named `3dsmc-project`.

```
docker build -t 3dsmc-project .
```

Then, run the container using the command below. This mounts your current directory to `/usr/src/project` inside the container so you can access your code and video files.

```
docker run -it --rm -v $(pwd):/usr/src/project 3dsmc-project
```

## Build 

Once inside the container, build the project using CMake:

```
mkdir build
cd build
cmake ..
make
```

## Run

```text
Usage: pipeline [--help] [--version] --video-path VAR --smpl-path VAR [--output VAR] [--precomputed-keypoints VAR]

Optional arguments:
  -h, --help               shows help message and exits 
  -v, --version            prints version information and exits 
  --video-path             Path to video file [required]
  --smpl-path              Path to model generated by preprocess.py (.json) [required]
  --output                 Output folder to save results. [nargs=0..1] [default: "./output"]
  --precomputed-keypoints  Path to pre-computed keypoints (.json)
```

Example:

```bash
./pipeline \
  --video-path ../data/sample.avi \
  --smpl-path ../models/smpl_female.json \
  --precomputed-keypoints ../data/keypoints.json
```